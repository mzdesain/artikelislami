<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog Islami - Menebar Kebaikan</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script><!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
        @font-face {
            font-family: 'Kemenag';
            src: url('https://cdn.jsdelivr.net/gh/warungpintar/fonts/kemenag.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        body {
            box-sizing: border-box;
            font-family: system-ui, -apple-system, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .arabic-text {
            font-family: 'Kemenag', 'Traditional Arabic', 'Arial', sans-serif;
            direction: rtl;
            text-align: right;
            line-height: 2;
            font-size: 1.5em;
        }

        .article-content {
            font-family: 'EB Garamond', serif;
            text-align: justify;
            line-height: 1.8;
            font-size: 1.15rem;
        }

        .article-content p {
            margin-bottom: 1.25rem;
        }

        .article-content .arabic-text {
            font-family: 'Kemenag', 'Traditional Arabic', 'Arial', sans-serif;
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .category-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.1);
        }

        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .back-button {
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: translateX(-5px);
        }

        .comment-form {
            background: #f9fafb;
            border-radius: 1rem;
            padding: 1.5rem;
        }

        .comment-item {
            border-left: 3px solid #667eea;
            padding-left: 1rem;
            margin-bottom: 1rem;
        }

        @media (max-width: 768px) {
            .arabic-text {
                font-size: 1.25em;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gray-50">
  <div id="app" class="w-full h-full overflow-auto"><!-- Navigation -->
   <nav class="bg-white shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
     <div class="flex items-center justify-between">
      <div>
       <h1 id="blog-title" class="text-2xl md:text-3xl font-bold text-gray-800">Blog Islami</h1>
       <p id="blog-tagline" class="text-sm text-gray-600">Menebar Kebaikan, Menerangi Kehidupan</p>
      </div><button onclick="showHome()" class="text-gray-600 hover:text-gray-800 transition"> <i class="fas fa-home text-2xl"></i> </button>
     </div>
    </div>
   </nav><!-- Hero Section -->
   <section id="hero-section" class="hero-section text-white py-16 md:py-24 relative">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
     <h2 class="text-3xl md:text-5xl font-bold mb-4">Assalamu'alaikum Warahmatullahi Wabarakatuh</h2>
     <p class="text-lg md:text-xl opacity-90 mb-8">Mendalami Islam dengan Ilmu yang Shahih</p>
     <div class="flex flex-wrap justify-center gap-4">
      <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-lg px-6 py-4"><i class="fas fa-book-open text-2xl mb-2"></i>
       <p class="font-semibold" id="hero-stat-articles">0 Artikel</p>
      </div>
      <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-lg px-6 py-4"><i class="fas fa-eye text-2xl mb-2"></i>
       <p class="font-semibold" id="hero-stat-views">0 Views</p>
      </div>
      <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-lg px-6 py-4"><i class="fas fa-layer-group text-2xl mb-2"></i>
       <p class="font-semibold">4 Kategori</p>
      </div>
     </div>
    </div>
   </section><!-- Main Content -->
   <main id="home-view" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12"><!-- Categories Grid -->
    <section class="mb-12">
     <h3 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6">Kategori Artikel</h3>
     <div class="grid grid-cols-2 gap-4 md:gap-6">
      <div onclick="filterByCategory('Aqidah')" class="category-card bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6">
       <div class="flex flex-col md:flex-row items-center md:justify-between gap-3">
        <div class="flex items-center gap-3 md:gap-4 w-full md:w-auto">
         <div class="w-12 h-12 md:w-14 md:h-14 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0"><i class="fas fa-star-and-crescent text-blue-600 text-xl md:text-2xl"></i>
         </div>
         <div class="flex-1 md:flex-initial">
          <h4 class="text-base md:text-xl font-bold text-gray-800">Aqidah</h4>
          <p class="text-xs md:text-sm text-gray-500">Tauhid &amp; Keimanan</p>
         </div>
        </div>
        <div class="text-center md:text-right w-full md:w-auto">
         <p class="text-2xl md:text-3xl font-bold text-blue-600" id="count-aqidah">0</p>
         <p class="text-xs text-gray-500">Artikel</p>
        </div>
       </div>
      </div>
      <div onclick="filterByCategory('Fiqih')" class="category-card bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6">
       <div class="flex flex-col md:flex-row items-center md:justify-between gap-3">
        <div class="flex items-center gap-3 md:gap-4 w-full md:w-auto">
         <div class="w-12 h-12 md:w-14 md:h-14 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0"><i class="fas fa-balance-scale text-green-600 text-xl md:text-2xl"></i>
         </div>
         <div class="flex-1 md:flex-initial">
          <h4 class="text-base md:text-xl font-bold text-gray-800">Fiqih</h4>
          <p class="text-xs md:text-sm text-gray-500">Hukum &amp; Ibadah</p>
         </div>
        </div>
        <div class="text-center md:text-right w-full md:w-auto">
         <p class="text-2xl md:text-3xl font-bold text-green-600" id="count-fiqih">0</p>
         <p class="text-xs text-gray-500">Artikel</p>
        </div>
       </div>
      </div>
      <div onclick="filterByCategory('Akhlak')" class="category-card bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6">
       <div class="flex flex-col md:flex-row items-center md:justify-between gap-3">
        <div class="flex items-center gap-3 md:gap-4 w-full md:w-auto">
         <div class="w-12 h-12 md:w-14 md:h-14 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0"><i class="fas fa-heart text-purple-600 text-xl md:text-2xl"></i>
         </div>
         <div class="flex-1 md:flex-initial">
          <h4 class="text-base md:text-xl font-bold text-gray-800">Akhlak</h4>
          <p class="text-xs md:text-sm text-gray-500">Perilaku &amp; Etika</p>
         </div>
        </div>
        <div class="text-center md:text-right w-full md:w-auto">
         <p class="text-2xl md:text-3xl font-bold text-purple-600" id="count-akhlak">0</p>
         <p class="text-xs text-gray-500">Artikel</p>
        </div>
       </div>
      </div>
      <div onclick="filterByCategory('Kisah')" class="category-card bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6">
       <div class="flex flex-col md:flex-row items-center md:justify-between gap-3">
        <div class="flex items-center gap-3 md:gap-4 w-full md:w-auto">
         <div class="w-12 h-12 md:w-14 md:h-14 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0"><i class="fas fa-book-reader text-orange-600 text-xl md:text-2xl"></i>
         </div>
         <div class="flex-1 md:flex-initial">
          <h4 class="text-base md:text-xl font-bold text-gray-800">Kisah Inspiratif</h4>
          <p class="text-xs md:text-sm text-gray-500">Teladan &amp; Hikmah</p>
         </div>
        </div>
        <div class="text-center md:text-right w-full md:w-auto">
         <p class="text-2xl md:text-3xl font-bold text-orange-600" id="count-kisah">0</p>
         <p class="text-xs text-gray-500">Artikel</p>
        </div>
       </div>
      </div>
     </div>
    </section><!-- Articles Grid -->
    <section>
     <div class="flex items-center justify-between mb-6">
      <h3 class="text-2xl md:text-3xl font-bold text-gray-800">Artikel Terbaru</h3><select id="category-filter" onchange="applyFilter()" class="px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"> <option value="all">Semua Kategori</option> <option value="Aqidah">Aqidah</option> <option value="Fiqih">Fiqih</option> <option value="Akhlak">Akhlak</option> <option value="Kisah">Kisah Inspiratif</option> </select>
     </div>
     <div id="articles-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8"><!-- Articles will be rendered here -->
     </div>
    </section>
   </main><!-- Article Detail View -->
   <article id="article-view" class="hidden max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12"><button onclick="showHome()" class="back-button flex items-center gap-2 text-purple-600 hover:text-purple-700 mb-6 font-semibold"> <i class="fas fa-arrow-left"></i> Kembali ke Beranda </button>
    <div class="bg-white rounded-2xl shadow-lg overflow-hidden mb-8">
     <div class="p-6 md:p-10">
      <div class="flex flex-wrap items-center gap-3 mb-4"><span id="detail-category" class="px-4 py-1.5 rounded-full text-sm font-semibold"></span> <span class="text-gray-400">•</span> <span id="detail-date" class="text-gray-600 text-sm"></span> <span class="text-gray-400">•</span> <span id="detail-author" class="text-gray-600 text-sm flex items-center gap-1"> <i class="fas fa-user-circle"></i> </span>
      </div>
      <h1 id="detail-title" class="text-3xl md:text-4xl font-bold text-gray-800 mb-6"></h1>
      <div class="flex items-center gap-6 text-gray-600 text-sm mb-8 pb-8 border-b">
       <div class="flex items-center gap-2"><i class="fas fa-eye text-purple-600"></i> <span id="detail-views">0</span>
       </div>
       <div class="flex items-center gap-2"><i class="fas fa-comment text-purple-600"></i> <span id="detail-comments-count">0</span>
       </div>
      </div>
      <div id="detail-content" class="article-content prose prose-lg max-w-none text-gray-700"><!-- Content will be rendered here -->
      </div>
     </div>
    </div><!-- Comments Section -->
    <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
     <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2"><i class="fas fa-comments text-purple-600"></i> Komentar</h3>
     <div class="comment-form mb-8">
      <form id="comment-form" onsubmit="handleCommentSubmit(event)">
       <div class="mb-4"><label for="comment-name" class="block text-sm font-semibold text-gray-700 mb-2">Nama</label> <input type="text" id="comment-name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Nama Anda">
       </div>
       <div class="mb-4"><label for="comment-text" class="block text-sm font-semibold text-gray-700 mb-2">Komentar</label> <textarea id="comment-text" required rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Tulis komentar Anda..."></textarea>
       </div><button type="submit" class="bg-purple-600 text-white px-6 py-2.5 rounded-lg font-semibold hover:bg-purple-700 transition"> <i class="fas fa-paper-plane mr-2"></i> Kirim Komentar </button>
      </form>
     </div>
     <div id="comments-list"><!-- Comments will be rendered here -->
     </div>
    </div>
   </article><!-- Footer -->
   <footer class="bg-gray-800 text-white py-8 mt-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
     <p id="footer-text" class="text-sm md:text-base opacity-90">© 2024 Blog Islami. Menebar Kebaikan, Menerangi Kehidupan</p>
     <div class="flex justify-center gap-6 mt-4"><a href="#" class="hover:text-purple-400 transition"><i class="fab fa-facebook text-xl"></i></a> <a href="#" class="hover:text-purple-400 transition"><i class="fab fa-twitter text-xl"></i></a> <a href="#" class="hover:text-purple-400 transition"><i class="fab fa-instagram text-xl"></i></a> <a href="#" class="hover:text-purple-400 transition"><i class="fab fa-youtube text-xl"></i></a>
     </div>
    </div>
   </footer>
  </div>
  <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBwmiVnWL1nZ09InaKPyGb33EHVufcub2U",
            authDomain: "fir-6a3d1.firebaseapp.com",
            databaseURL: "https://fir-6a3d1-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "fir-6a3d1",
            storageBucket: "fir-6a3d1.firebasestorage.app",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:f394703a309a0e8202ce75",
            measurementId: "G-Y1PVBSMWFP"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const database = firebase.database();
        const articlesRef = database.ref('articles');

        let articles = [];
        let currentArticle = null;

        const defaultConfig = {
            blog_title: "Blog Islami",
            blog_tagline: "Menebar Kebaikan, Menerangi Kehidupan",
            footer_text: "© 2024 Blog Islami. Menebar Kebaikan, Menerangi Kehidupan",
            primary_color: "#667eea",
            secondary_color: "#764ba2",
            bg_color: "#f9fafb",
            text_color: "#1f2937"
        };

        // Listen to Firebase real-time updates
        articlesRef.on('value', (snapshot) => {
            const data = snapshot.val();
            articles = data ? Object.keys(data).map(key => ({
                id: key,
                ...data[key]
            })).filter(article => article.status === 'published') : [];
            
            renderArticles();
            updateCategoryCounts();
            updateHeroStats();
        });

        function updateHeroStats() {
            const totalArticles = articles.length;
            const totalViews = articles.reduce((sum, a) => sum + (a.views || 0), 0);
            
            document.getElementById('hero-stat-articles').textContent = `${totalArticles} Artikel`;
            document.getElementById('hero-stat-views').textContent = `${totalViews} Views`;
        }

        function updateCategoryCounts() {
            const counts = {
                'Aqidah': 0,
                'Fiqih': 0,
                'Akhlak': 0,
                'Kisah': 0
            };

            articles.forEach(article => {
                if (counts.hasOwnProperty(article.category)) {
                    counts[article.category]++;
                }
            });

            document.getElementById('count-aqidah').textContent = counts['Aqidah'];
            document.getElementById('count-fiqih').textContent = counts['Fiqih'];
            document.getElementById('count-akhlak').textContent = counts['Akhlak'];
            document.getElementById('count-kisah').textContent = counts['Kisah'];
        }

        function renderArticles() {
            const grid = document.getElementById('articles-grid');
            const categoryFilter = document.getElementById('category-filter').value;

            let filtered = articles;
            if (categoryFilter !== 'all') {
                filtered = articles.filter(a => a.category === categoryFilter);
            }

            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fas fa-inbox text-6xl text-gray-300 mb-4"></i>
                        <p class="text-gray-500 text-lg">Belum ada artikel yang dipublikasikan</p>
                    </div>
                `;
                return;
            }

            const sorted = [...filtered].sort((a, b) => new Date(b.timestamp || 0) - new Date(a.timestamp || 0));

            grid.innerHTML = sorted.map(article => `
                <div onclick="showArticle('${article.id}')" class="card bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden fade-in">
                    <div class="p-6">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold ${getCategoryColor(article.category)}">${article.category}</span>
                            <span class="text-gray-400 text-xs">•</span>
                            <span class="text-gray-500 text-xs">${article.date}</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-3 line-clamp-2">${article.title}</h3>
                        <p class="text-gray-600 mb-4 line-clamp-3">${article.excerpt}</p>
                        <div class="flex items-center justify-between text-sm text-gray-500">
                            <span class="flex items-center gap-1">
                                <i class="fas fa-user-circle"></i>
                                ${article.author}
                            </span>
                            <div class="flex items-center gap-3">
                                <span class="flex items-center gap-1">
                                    <i class="fas fa-eye"></i>
                                    ${article.views || 0}
                                </span>
                                <span class="flex items-center gap-1">
                                    <i class="fas fa-comment"></i>
                                    ${article.comments || 0}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getCategoryColor(category) {
            const colors = {
                'Aqidah': 'bg-blue-100 text-blue-700',
                'Fiqih': 'bg-green-100 text-green-700',
                'Akhlak': 'bg-purple-100 text-purple-700',
                'Kisah': 'bg-orange-100 text-orange-700'
            };
            return colors[category] || 'bg-gray-100 text-gray-700';
        }

        function filterByCategory(category) {
            document.getElementById('category-filter').value = category;
            applyFilter();
            window.scrollTo({ top: document.getElementById('articles-grid').offsetTop - 100, behavior: 'smooth' });
        }

        function applyFilter() {
            renderArticles();
        }

        async function showArticle(id) {
            const article = articles.find(a => a.id === id);
            if (!article) return;

            currentArticle = article;

            // Increment views
            const newViews = (article.views || 0) + 1;
            await articlesRef.child(id).update({ views: newViews });

            // Update UI
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('hero-section').classList.add('hidden');
            document.getElementById('article-view').classList.remove('hidden');

            document.getElementById('detail-title').textContent = article.title;
            document.getElementById('detail-category').textContent = article.category;
            document.getElementById('detail-category').className = `px-4 py-1.5 rounded-full text-sm font-semibold ${getCategoryColor(article.category)}`;
            document.getElementById('detail-date').textContent = article.date;
            document.getElementById('detail-author').innerHTML = `<i class="fas fa-user-circle"></i> ${article.author}`;
            document.getElementById('detail-views').textContent = newViews;
            document.getElementById('detail-comments-count').textContent = article.comments || 0;
            
            // Format content with proper paragraphs
            const formattedContent = article.content.split('\n\n').map(para => `<p>${para}</p>`).join('');
            document.getElementById('detail-content').innerHTML = formattedContent;

            // Load comments
            loadComments(id);

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showHome() {
            document.getElementById('article-view').classList.add('hidden');
            document.getElementById('hero-section').classList.remove('hidden');
            document.getElementById('home-view').classList.remove('hidden');
            currentArticle = null;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function loadComments(articleId) {
            const commentsRef = database.ref(`comments/${articleId}`);
            commentsRef.on('value', (snapshot) => {
                const data = snapshot.val();
                const comments = data ? Object.keys(data).map(key => ({
                    id: key,
                    ...data[key]
                })) : [];

                renderComments(comments);
            });
        }

        function renderComments(comments) {
            const list = document.getElementById('comments-list');
            
            if (comments.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-comments text-4xl text-gray-300 mb-3"></i>
                        <p class="text-gray-500">Belum ada komentar. Jadilah yang pertama berkomentar!</p>
                    </div>
                `;
                return;
            }

            const sorted = [...comments].sort((a, b) => new Date(b.timestamp || 0) - new Date(a.timestamp || 0));

            list.innerHTML = sorted.map(comment => `
                <div class="comment-item bg-white p-4 rounded-lg mb-4">
                    <div class="flex items-center gap-2 mb-2">
                        <i class="fas fa-user-circle text-purple-600 text-xl"></i>
                        <span class="font-semibold text-gray-800">${comment.name}</span>
                        <span class="text-gray-400 text-xs">•</span>
                        <span class="text-gray-500 text-xs">${comment.date}</span>
                    </div>
                    <p class="text-gray-700">${comment.text}</p>
                </div>
            `).join('');
        }

        async function handleCommentSubmit(e) {
            e.preventDefault();

            if (!currentArticle) return;

            const name = document.getElementById('comment-name').value;
            const text = document.getElementById('comment-text').value;

            const commentData = {
                name: name,
                text: text,
                date: new Date().toLocaleDateString('id-ID', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                }),
                timestamp: Date.now()
            };

            try {
                await database.ref(`comments/${currentArticle.id}`).push(commentData);
                
                // Update comment count
                const newCount = (currentArticle.comments || 0) + 1;
                await articlesRef.child(currentArticle.id).update({ comments: newCount });
                
                document.getElementById('comment-form').reset();
            } catch (error) {
                console.error('Error posting comment:', error);
            }
        }

        async function onConfigChange(config) {
            const titleEl = document.getElementById('blog-title');
            const taglineEl = document.getElementById('blog-tagline');
            const footerEl = document.getElementById('footer-text');
            
            if (titleEl) titleEl.textContent = config.blog_title || defaultConfig.blog_title;
            if (taglineEl) taglineEl.textContent = config.blog_tagline || defaultConfig.blog_tagline;
            if (footerEl) footerEl.textContent = config.footer_text || defaultConfig.footer_text;

            const bgColor = config.bg_color || defaultConfig.bg_color;
            const textColor = config.text_color || defaultConfig.text_color;

            document.body.style.backgroundColor = bgColor;
            document.body.style.color = textColor;
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.primary_color || defaultConfig.primary_color,
                        set: (value) => {
                            config.primary_color = value;
                            if (window.elementSdk) window.elementSdk.setConfig({ primary_color: value });
                        }
                    },
                    {
                        get: () => config.bg_color || defaultConfig.bg_color,
                        set: (value) => {
                            config.bg_color = value;
                            if (window.elementSdk) window.elementSdk.setConfig({ bg_color: value });
                        }
                    },
                    {
                        get: () => config.text_color || defaultConfig.text_color,
                        set: (value) => {
                            config.text_color = value;
                            if (window.elementSdk) window.elementSdk.setConfig({ text_color: value });
                        }
                    }
                ],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["blog_title", config.blog_title || defaultConfig.blog_title],
                ["blog_tagline", config.blog_tagline || defaultConfig.blog_tagline],
                ["footer_text", config.footer_text || defaultConfig.footer_text]
            ]);
        }

        (function init() {
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    onConfigChange,
                    mapToCapabilities,
                    mapToEditPanelValues
                });
            }
        })();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b46915bf0cf5fbd',t:'MTc2NjgxNDkxNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
